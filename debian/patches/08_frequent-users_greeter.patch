--- a/daemon/ck-connector.c
+++ b/daemon/ck-connector.c
@@ -430,6 +430,14 @@
                 name = va_arg (var_args, char *);
         }
 
+        const char *session_type = "gdm";
+        if (! add_param_basic (&iter_array, "session-type", DBUS_TYPE_STRING, &session_type)) {
+                dbus_set_error (error,
+                                CK_CONNECTOR_ERROR,
+                                "Error adding parameter: session-type");
+                goto out;
+        }
+
         if (! dbus_message_iter_close_container (&iter, &iter_array)) {
                 goto out;
         }
--- a/gui/simple-greeter/gdm-user-manager.c
+++ b/gui/simple-greeter/gdm-user-manager.c
@@ -1322,7 +1322,7 @@
                 return;
         }
 
-        command = g_strdup_printf ("ck-history --frequent --seat='%s' --session-type=''",
+        command = g_strdup_printf ("ck-history --frequent --seat='%s' --session-type='gdm'",
                                    seat_id);
         g_debug ("GdmUserManager: running '%s'", command);
         error = NULL;
