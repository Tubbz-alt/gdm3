GNOME #455190; Debian #432227; SVN r5044; fixes crash when using IPv6

2007-07-09  Brian Cameron  <brian.cameron@sun.com>

	* daemon/misc.c: Initialize hints and set ai_family in the
	  function gdm_peek_local_address_list.

Index: daemon/misc.c
===================================================================
--- daemon/misc.c (revision 5043)
+++ daemon/misc.c (revision 5044)
@@ -1084,6 +1084,10 @@ gdm_peek_local_address_list (void)
 		return g_list_append (the_list, sin6);
 	}
 
+	memset (&hints, 0, sizeof (hints));
+	hints.ai_family = AF_INET;
+	hints.ai_family |= AF_INET6;
+
 	if (getaddrinfo (hostbuf, NULL, &hints, &result) != 0) {
 		gdm_debug ("%s: Could not get address from hostname!", "gdm_peek_local_address_list");
 
