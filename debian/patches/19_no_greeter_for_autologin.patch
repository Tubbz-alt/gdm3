Description: gdm_slave_get_timed_login_details() does not fill variables if username is NULL
Bug: https://bugzilla.gnome.org/show_bug.cgi?id=596830
Bug-Ubuntu: https://bugs.edge.launchpad.net/ubuntu/+source/gdm/+bug/435801

Index: gdm-2.30.2/daemon/gdm-simple-slave.c
===================================================================
--- gdm-2.30.2.orig/daemon/gdm-simple-slave.c	2010-04-27 03:08:42.000000000 +1000
+++ gdm-2.30.2/daemon/gdm-simple-slave.c	2010-06-22 13:11:22.424157016 +1000
@@ -1050,6 +1050,7 @@
         if (res) {
                 gboolean enabled;
                 int      delay;
+                char    *username;
 
                 /* FIXME: handle wait-for-go */
 
@@ -1057,7 +1058,8 @@
 
                 delay = 0;
                 enabled = FALSE;
-                gdm_slave_get_timed_login_details (GDM_SLAVE (slave), &enabled, NULL, &delay);
+                gdm_slave_get_timed_login_details (GDM_SLAVE (slave), &enabled, &username, &delay);
+                g_free (username);
                 if (! enabled || delay > 0) {
                         start_greeter (slave);
                         create_new_session (slave);
