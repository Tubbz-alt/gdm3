Index: gdm-2.18.2/configure.ac
===================================================================
--- gdm-2.18.2.orig/configure.ac	2007-05-29 19:06:44.749348250 +0200
+++ gdm-2.18.2/configure.ac	2007-05-29 19:08:36.096307000 +0200
@@ -1074,29 +1074,10 @@
     GDM_USER_PATH="$GDM_USER_PATH:${bindir}"
 fi
 
-# Use Xephyr if it is available.  It works better than Xnest since Xephyr
-# supports the Xserver extensions, even if on a remote machine.
-#
-if test -x $X_SERVER_PATH/Xephyr; then
-    X_XNEST_CMD="$X_SERVER_PATH/Xephyr"
-    X_XNEST_CONFIG_OPTIONS="-audit 0"
-    X_XNEST_UNSCALED_FONTPATH="true"
-else
-    if test -x /usr/openwin/bin/Xnest; then
-        # If on Solaris, Xnest is only shipped with the Xsun Xserver, so
-        # use this version.
-        #
-        X_XNEST_CMD="/usr/openwin/bin/Xnest"
-        X_XNEST_CONFIG_OPTIONS="-audit 0 -name Xnest -pn"
-        X_XNEST_UNSCALED_FONTPATH="false"
-    else
-        if test -x $X_SERVER_PATH/Xnest; then
-            X_XNEST_CMD="$X_SERVER_PATH/Xnest"
-            X_XNEST_CONFIG_OPTIONS="-audit 0 -name Xnest"
-            X_XNEST_UNSCALED_FONTPATH="true"
-        fi
-    fi
-fi
+# Use the wrapper script for the nested X server
+X_XNEST_CMD=/usr/share/gdm/gdmXnestWrapper
+X_XNEST_CONFIG_OPTIONS="-audit 0"
+X_XNEST_UNSCALED_FONTPATH="true"
 
 # Set POST_PATH after doing system specific case above just in case
 # any platforms want to update the PATH for a specific OS or distro.
