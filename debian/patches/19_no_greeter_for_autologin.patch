Description: gdm_slave_get_timed_login_details() does not fill variables if username is NULL
Bug: https://bugzilla.gnome.org/show_bug.cgi?id=596830
Bug-Ubuntu: https://bugs.edge.launchpad.net/ubuntu/+source/gdm/+bug/435801

Index: gdm-2.30.4/daemon/gdm-simple-slave.c
===================================================================
--- gdm-2.30.4.orig/daemon/gdm-simple-slave.c	2010-06-29 15:42:14.000000000 +0200
+++ gdm-2.30.4/daemon/gdm-simple-slave.c	2010-06-30 14:49:38.000000000 +0200
@@ -1058,6 +1058,7 @@
         if (res) {
                 gboolean enabled;
                 int      delay;
+                char    *username;
 
                 /* FIXME: handle wait-for-go */
 
@@ -1065,7 +1066,8 @@
 
                 delay = 0;
                 enabled = FALSE;
-                gdm_slave_get_timed_login_details (GDM_SLAVE (slave), &enabled, NULL, &delay);
+                gdm_slave_get_timed_login_details (GDM_SLAVE (slave), &enabled, &username, &delay);
+                g_free (username);
                 if (! enabled || delay > 0) {
                         start_greeter (slave);
                         create_new_session (slave);
