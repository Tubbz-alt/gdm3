Description: Change Bonobo activation server name to avoid conflict with indicator-session
Bug: https://bugs.edge.launchpad.net/ubuntu/+source/gdm/+bug/410498

Index: gdm-2.30.2/gui/user-switch-applet/applet.c
===================================================================
--- gdm-2.30.2.orig/gui/user-switch-applet/applet.c	2010-03-27 00:28:03.000000000 +1100
+++ gdm-2.30.2/gui/user-switch-applet/applet.c	2010-06-22 13:11:00.806662470 +1000
@@ -103,7 +103,7 @@
                                 const char    *iid,
                                 gpointer       data);
 
-PANEL_APPLET_BONOBO_FACTORY ("OAFIID:GNOME_FastUserSwitchApplet_Factory",
+PANEL_APPLET_BONOBO_FACTORY ("OAFIID:GNOME_FastUserSwitchAppletGdm_Factory",
                              PANEL_TYPE_APPLET,
                              "gdm-user-switch-applet", "0",
                              (PanelAppletFactoryCallback)applet_factory,
@@ -1644,7 +1644,7 @@
 {
         gboolean ret;
         ret = FALSE;
-        if (strcmp (iid, "OAFIID:GNOME_FastUserSwitchApplet") == 0) {
+        if (strcmp (iid, "OAFIID:GNOME_FastUserSwitchAppletGdm") == 0) {
                 ret = fill_applet (applet);
         }
         return ret;
Index: gdm-2.30.2/gui/user-switch-applet/GNOME_FastUserSwitchApplet.server.in.in
===================================================================
--- gdm-2.30.2.orig/gui/user-switch-applet/GNOME_FastUserSwitchApplet.server.in.in	2010-03-18 08:27:16.000000000 +1100
+++ gdm-2.30.2/gui/user-switch-applet/GNOME_FastUserSwitchApplet.server.in.in	2010-06-22 13:11:00.806662470 +1000
@@ -1,5 +1,5 @@
 <oaf_info>
-  <oaf_server iid="OAFIID:GNOME_FastUserSwitchApplet_Factory" type="exe"
+  <oaf_server iid="OAFIID:GNOME_FastUserSwitchAppletGdm_Factory" type="exe"
               location="@LIBEXECDIR@/gdm-user-switch-applet">
 
     <oaf_attribute name="repo_ids" type="stringv">
@@ -18,8 +18,8 @@
     </oaf_attribute>
   </oaf_server>
 
-  <oaf_server iid="OAFIID:GNOME_FastUserSwitchApplet" type="factory"
-              location="OAFIID:GNOME_FastUserSwitchApplet_Factory">
+  <oaf_server iid="OAFIID:GNOME_FastUserSwitchAppletGdm" type="factory"
+              location="OAFIID:GNOME_FastUserSwitchAppletGdm_Factory">
 
     <oaf_attribute name="repo_ids" type="stringv">
       <item value="IDL:GNOME/Vertigo/PanelAppletShell:1.0"/>
