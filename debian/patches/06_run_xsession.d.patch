#
# Description: Run /etc/X11/Xsession.d/.
# Ubuntu-Specific: /etc/X11/Xsession.d is a Debianism/Ubuntuism
#
diff -Nur -x '*.orig' -x '*~' gdm-2.27.4/data/Xsession.in gdm-2.27.4.new/data/Xsession.in
--- gdm-2.27.4/data/Xsession.in	2009-07-20 03:09:09.000000000 +0200
+++ gdm-2.27.4.new/data/Xsession.in	2009-07-21 14:29:06.978475046 +0200
@@ -186,6 +186,16 @@
     done
 fi
 
+# run /etc/X11/Xsession.d/
+OPTIONFILE=/etc/X11/Xsession.options
+if [ -d /etc/X11/Xsession.d ]; then
+    for i in `ls /etc/X11/Xsession.d/` ; do
+        if [ -r "/etc/X11/Xsession.d/$i" ] && expr "$i" : '^[[:alnum:]_-]\+$' > /dev/null; then
+	    . "/etc/X11/Xsession.d/$i"
+        fi
+    done
+fi
+
 if [ "x$command" = "xcustom" ] ; then
   if [ -x "$HOME/.xsession" ]; then
     command="$HOME/.xsession"
